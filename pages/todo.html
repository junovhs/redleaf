<html><head><base href="https://dailytodolist.com/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DailyTodoList - Your Dynamic Task Organizer</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f0f4f8;
        transition: background-color 0.3s, color 0.3s;
    }
    body.dark-mode {
        background-color: #1a1a1a;
        color: #f0f0f0;
    }
    .container {
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin-top: 20px;
    }
    .dark-mode .container {
        background: #2c2c2c;
        box-shadow: 0 4px 6px rgba(255, 255, 255, 0.1);
    }
    h1, h2 {
        color: #2c3e50;
        text-align: center;
    }
    .dark-mode h1, .dark-mode h2 {
        color: #ffffff;
    }
    .collapsible-header {
        cursor: pointer;
        padding: 10px;
        background-color: #f1f1f1;
        border-radius: 4px;
    }
    .dark-mode .collapsible-header {
        background-color: #3a3a3a;
    }
    .collapsible-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
    }
    .collapsible.active .collapsible-content {
        max-height: 1000px; /* Adjust as needed */
        transition: max-height 0.5s ease-in;
    }
    #todoInput {
        width: 100%;
        height: 200px;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ced4da;
        border-radius: 4px;
    }
    .dark-mode #todoInput,
    .dark-mode #workDuration,
    .dark-mode #manualTaskInput,
    .dark-mode #manualTimeInput,
    .dark-mode #manualNoteInput {
        background-color: #2c2c2c;
        color: #f0f0f0;
        border-color: #555;
    }
    #workDuration {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ced4da;
        border-radius: 4px;
    }
    button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .dark-mode button {
        background-color: #0056b3;
    }
    button:hover {
        background-color: #0056b3;
    }
    .dark-mode button:hover {
        background-color: #003d82;
    }
    .todo-list {
        margin-top: 20px;
    }
    .todo-item {
        display: flex;
        flex-direction: column;
        margin-bottom: 10px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 4px;
        transition: background-color 0.3s ease;
    }
    .dark-mode .todo-item {
        background-color: #2c2c2c;
    }
    .todo-item.completed {
        background-color: #d4edda;
    }
    .dark-mode .todo-item.completed {
        background-color: #1e3a2b;
    }
    .todo-content {
        display: flex;
        align-items: center;
    }
    .todo-checkbox {
        margin-right: 10px;
    }
    .todo-text {
        flex-grow: 1;
    }
    .todo-time {
        width: 80px;
        text-align: right;
    }
    .todo-delete {
        margin-left: 10px;
        color: #777;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .dark-mode .todo-delete {
        color: #aaa;
    }
    .todo-delete:hover {
        color: #dc3545;
        transform: scale(1.1);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    .dark-mode .todo-delete:hover {
        color: #ff6b6b;
    }
    .todo-note {
        font-size: 0.9em;
        color: #777;
        margin-top: 5px;
        font-style: italic;
    }
    .dark-mode .todo-note {
        color: #aaa;
    }
    .progress-bar {
        background-color: #e9ecef;
        height: 20px;
        border-radius: 10px;
        margin-top: 20px;
        overflow: hidden;
    }
    .dark-mode .progress-bar {
        background-color: #3a3a3a;
    }
    .progress {
        width: 0;
        height: 100%;
        background-color: #28a745;
        transition: width 0.5s ease-in-out;
    }
    #confetti-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
    }
    #manualAdd {
        margin-top: 10px;
    }
    #manualTaskInput, #manualTimeInput, #manualNoteInput {
        width: calc(50% - 5px);
        padding: 10px;
        margin-right: 10px;
        border: 1px solid #ced4da;
        border-radius: 4px;
    }
    #manualNoteInput {
        width: calc(50% - 5px);
        padding: 10px;
        margin-right: 10px;
        border: 1px solid #ced4da;
        border-radius: 4px;
    }
    #addManualTask {
        width: calc(50% - 5px);
    }
    [contenteditable="true"]:focus {
        outline: 2px solid #007bff;
        border-radius: 2px;
    }
    #darkModeToggle {
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    #darkModeToggle:hover {
        background-color: #0056b3;
    }
    .drag-handle {
        cursor: move;
        padding: 10px;
        color: #777;
        margin-right: 10px;
    }
    .dark-mode .drag-handle {
        color: #aaa;
    }
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
        40% {transform: translateY(-30px);}
        60% {transform: translateY(-15px);}
    }
    @keyframes shake {
        0%, 100% {transform: translateX(0);}
        10%, 30%, 50%, 70%, 90% {transform: translateX(-10px);}
        20%, 40%, 60%, 80% {transform: translateX(10px);}
    }
    @keyframes rotate {
        0% {transform: rotate(0deg);}
        100% {transform: rotate(360deg);}
    }
    @keyframes pulse {
        0% {transform: scale(1);}
        50% {transform: scale(1.1);}
        100% {transform: scale(1);}
    }
    @keyframes rainbow {
        0% {background-color: red;}
        14% {background-color: orange;}
        28% {background-color: yellow;}
        42% {background-color: green;}
        56% {background-color: blue;}
        70% {background-color: indigo;}
        84% {background-color: violet;}
        100% {background-color: red;}
    }
    @keyframes glowPulse {
        0% {box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);}
        50% {box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);}
        100% {box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);}
    }
    @keyframes sparkle {
        0%, 100% { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">✨</text></svg>'); }
        50% { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">🌟</text></svg>'); }
    }
    .bounce { animation: bounce 1s; }
    .shake { animation: shake 0.5s; }
    .rotate { animation: rotate 1s linear; }
    .pulse { animation: pulse 0.5s; }
    .rainbow { animation: rainbow 2s linear infinite; }
    .glow { animation: glowPulse 1s infinite; }
    .sparkle { animation: sparkle 0.5s steps(2, end) infinite; }
</style>
</head>
<body>
    <button id="darkModeToggle">Toggle Dark Mode</button>
    <h1>Your Dynamic Daily Todo List</h1>
    <div class="container collapsible">
        <h2 class="collapsible-header">Input Your Tasks</h2>
        <div class="collapsible-content">
            <textarea id="todoInput" placeholder="Paste your todo list here..."></textarea>
            <input type="number" id="workDuration" placeholder="Total work duration (in minutes)">
            <button id="parseButton">Parse Todo List</button>
            <div id="manualAdd">
                <input type="text" id="manualTaskInput" placeholder="Add a task">
                <input type="number" id="manualTimeInput" placeholder="Time (minutes)">
                <input type="text" id="manualNoteInput" placeholder="Add a note">
                <button id="addManualTask">Add Task</button>
            </div>
        </div>
    </div>
    <div class="container">
        <h2>Your Tasks</h2>
        <div id="todoItems" class="todo-list"></div>
    </div>
    <div class="progress-bar">
        <div class="progress" id="progressBar"></div>
    </div>
    <canvas id="confetti-canvas"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const todoInput = document.getElementById('todoInput');
        const workDurationInput = document.getElementById('workDuration');
        const parseButton = document.getElementById('parseButton');
        const todoItemsContainer = document.getElementById('todoItems');
        const progressBar = document.getElementById('progressBar');
        const manualTaskInput = document.getElementById('manualTaskInput');
        const manualTimeInput = document.getElementById('manualTimeInput');
        const manualNoteInput = document.getElementById('manualNoteInput');
        const addManualTaskButton = document.getElementById('addManualTask');
        const collapsible = document.querySelector('.collapsible');
        const collapsibleHeader = document.querySelector('.collapsible-header');
        const darkModeToggle = document.getElementById('darkModeToggle');

        let todoList = [];
        let totalTime = 0;
        let completedTime = 0;
        let workDuration = 0;

        const myConfetti = confetti.create(document.getElementById('confetti-canvas'), {
            resize: true,
            useWorker: true
        });

        parseButton.addEventListener('click', parseTodoList);
        addManualTaskButton.addEventListener('click', addManualTask);
        collapsibleHeader.addEventListener('click', () => {
            collapsible.classList.toggle('active');
        });

        darkModeToggle.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            updateDarkModeButton();
        });

        function updateDarkModeButton() {
            const isDarkMode = document.body.classList.contains('dark-mode');
            darkModeToggle.textContent = isDarkMode ? 'Toggle Light Mode' : 'Toggle Dark Mode';
        }

        const savedDarkMode = localStorage.getItem('darkMode');
        if (savedDarkMode === 'true') {
            document.body.classList.add('dark-mode');
        }
        updateDarkModeButton();

        function parseTodoList() {
            const input = todoInput.value;
            workDuration = parseInt(workDurationInput.value) || 0;
            todoList = [];
            totalTime = 0;
            completedTime = 0;

            const tasks = input.split(/\d+\.\s/).filter(task => task.trim() !== '');
            tasks.forEach(task => {
                const lines = task.trim().split('\n');
                const firstLine = lines[0];
                const description = lines.slice(1).join(' ').trim();

                let match = firstLine.match(/^(.*?)(?:\s*\((.*?)\))?$/);
                if (match) {
                    let text = match[1].trim();
                    let timeEstimate = match[2];
                    let time = 0;

                    if (timeEstimate) {
                        let timeMatch = timeEstimate.match(/(\d+(?:\.\d+)?)\s*(minutes?|mins?|m|hours?|hrs?|h)/i);
                        if (timeMatch) {
                            time = parseFloat(timeMatch[1]);
                            if (timeMatch[2].toLowerCase().startsWith('h')) {
                                time *= 60;
                            }
                        } else {
                            timeMatch = timeEstimate.match(/(\d+(?:\.\d+)?)\s*-\s*(\d+(?:\.\d+)?)\s*(minutes?|mins?|m|hours?|hrs?|h)/i);
                            if (timeMatch) {
                                let minTime = parseFloat(timeMatch[1]);
                                let maxTime = parseFloat(timeMatch[2]);
                                time = (minTime + maxTime) / 2;
                                if (timeMatch[3].toLowerCase().startsWith('h')) {
                                    time *= 60;
                                }
                            }
                        }
                    }

                    if (time === 0) {
                        time = 30;
                    }

                    todoList.push({ text, time: Math.round(time), description });
                    totalTime += Math.round(time);
                }
            });

            renderTodoList();
            updateProgressBar();
            collapsible.classList.remove('active');
        }

        function addManualTask() {
            const text = manualTaskInput.value.trim();
            const time = parseInt(manualTimeInput.value);
            const note = manualNoteInput.value.trim();
            if (text && !isNaN(time)) {
                todoList.push({ text, time, description: note });
                totalTime += time;
                renderTodoList();
                updateProgressBar();
                manualTaskInput.value = '';
                manualTimeInput.value = '';
                manualNoteInput.value = '';
            }
        }

        function renderTodoList() {
            todoItemsContainer.innerHTML = '';
            todoList.forEach((item, index) => {
                const todoItem = document.createElement('div');
                todoItem.className = 'todo-item';
                todoItem.innerHTML = `
                    <div class="todo-content">
                        <span class="drag-handle">⋮⋮</span>
                        <input type="checkbox" class="todo-checkbox" id="todo-${index}">
                        <label class="todo-text" for="todo-${index}" contenteditable="true">${item.text}</label>
                        <span class="todo-time" contenteditable="true">${item.time}m</span>
                        <span class="todo-delete">❌</span>
                    </div>
                    <div class="todo-note" contenteditable="true">${item.description ? `"${item.description}"` : ""}</div>
                `;
                todoItemsContainer.appendChild(todoItem);

                const checkbox = todoItem.querySelector('.todo-checkbox');
                checkbox.addEventListener('change', function() {
                    todoItem.classList.toggle('completed', this.checked);
                    if (this.checked) {
                        completedTime += item.time;
                        applyRandomAnimations(todoItem);
                        triggerConfetti();
                        playRandomSound();
                    } else {
                        completedTime -= item.time;
                    }
                    updateProgressBar();
                });

                const textElement = todoItem.querySelector('.todo-text');
                const timeElement = todoItem.querySelector('.todo-time');
                const noteElement = todoItem.querySelector('.todo-note');

                textElement.addEventListener('blur', function() {
                    item.text = this.textContent;
                });

                timeElement.addEventListener('blur', function() {
                    const newTime = parseInt(this.textContent);
                    if (!isNaN(newTime)) {
                        totalTime -= item.time;
                        item.time = newTime;
                        totalTime += newTime;
                        this.textContent = `${newTime}m`;
                        updateProgressBar();
                    } else {
                        this.textContent = `${item.time}m`;
                    }
                });

                noteElement.addEventListener('blur', function() {
                    item.description = this.textContent.replace(/"/g, '');
                    this.textContent = item.description ? `"${item.description}"` : "";
                });
            });

            new Sortable(todoItemsContainer, {
                animation: 150,
                handle: '.drag-handle',
                ghostClass: 'sortable-ghost',
                dragClass: "sortable-drag",
                onEnd: function() {
                    const newOrder = [...todoItemsContainer.children].map(item => {
                        const text = item.querySelector('.todo-text').textContent;
                        const time = parseInt(item.querySelector('.todo-time').textContent);
                        const description = item.querySelector('.todo-note').textContent.replace(/"/g, '') || '';
                        return { text, time, description };
                    });
                    todoList = newOrder;
                }
            });
        }

        function updateProgressBar() {
            const percentage = workDuration > 0 ? (completedTime / workDuration) * 100 : (completedTime / totalTime) * 100;
            progressBar.style.width = `${Math.min(percentage, 100)}%`;
        }

        function triggerConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            const shapes = ['square', 'circle', 'star'];

            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    myConfetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0, x: Math.random() },
                        gravity: 1,
                        scalar: 1.2,
                        startVelocity: 30,
                        ticks: 300,
                        shapes: shapes,
                        colors: colors
                    });
                }, i * 200);
            }
        }

        function getRandomAnimation() {
            const animations = ['bounce', 'shake', 'rotate', 'pulse', 'rainbow', 'glow', 'sparkle'];
            return animations[Math.floor(Math.random() * animations.length)];
        }

        function applyRandomAnimations(element) {
            const animationCount = 3 + Math.floor(Math.random() * 3); // Apply 3-5 animations
            const appliedAnimations = [];

            for (let i = 0; i < animationCount; i++) {
                let animation;
                do {
                    animation = getRandomAnimation();
                } while (appliedAnimations.includes(animation));

                appliedAnimations.push(animation);
                element.classList.add(animation);
            }

            setTimeout(() => {
                appliedAnimations.forEach(animation => element.classList.remove(animation));
            }, 2000);
        }

        function playRandomSound() {
            const sounds = [
                'https://example.com/sound1.mp3',
                'https://example.com/sound2.mp3',
                'https://example.com/sound3.mp3',
                // Add more sound URLs here
            ];
            const sound = new Audio(sounds[Math.floor(Math.random() * sounds.length)]);
            sound.play();
        }
    });
    </script>
</body></html>
